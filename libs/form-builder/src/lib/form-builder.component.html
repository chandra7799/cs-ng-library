<ng-container *ngIf="!!configuration && configuration?.controls as controls">
  <ng-container *ngIf="configuration?.layout as layout">
    <!-- Main container -->
    <div [ngClass]="layout['container'] || 'container-fluid'">
      <ng-container *ngFor="let row of layout | omit: ['container'] | keysIn">
        <form [formGroup]="formGroup">
          <!-- Row container -->
          <div class="row">
            <ng-container
              *ngFor="let col of layout[row] | omit: ['container'] | keysIn"
            >
              <ng-container *ngIf="layout[row][col] | omit: [''] as colValue">
                <!-- Col container -->
                <div [ngClass]="[colValue?.width] || 'col'">
                  <div class="form-group">
                    <label>
                      {{ controls[col].label }}
                      <strong *ngIf="controls[col].required">*</strong>
                    </label>

                    <input
                      [ngClass]="[
                        formGroup.controls[col].invalid &&
                        formGroup.controls[col].touched
                          ? 'border border-danger'
                          : ''
                      ]"
                      class="form-control"
                      [type]="controls[col]['inputType']"
                      [formControlName]="col"
                    />
                    <small
                      class="text-danger"
                      *ngIf="
                        formGroup.controls[col]?.invalid &&
                        formGroup.controls[col]?.touched &&
                        formGroup.controls[col].errors as errors
                      "
                    >
                      <ng-container
                        *ngIf="configuration.validatorMessages as errorMessages"
                      >
                        {{ errorMessages['required'] }}
                      </ng-container>
                    </small>
                  </div>
                </div>
              </ng-container>
            </ng-container>
          </div>
        </form>
      </ng-container>
    </div>
  </ng-container>
</ng-container>

<p>isValid : {{ formGroup.status | json }}</p>
<p>{{ formGroup.value | json }}</p>

<p>{{ formGroup.errors | json }}</p>
