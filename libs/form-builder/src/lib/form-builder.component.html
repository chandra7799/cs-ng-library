<ng-container *ngIf="!!configuration && configuration?.controls as controls">
  <ng-container *ngIf="configuration?.layout as layout">
    <!-- Main container -->
    <div [ngClass]="layout['container'] || 'container-fluid'">
      <form [formGroup]="formGroup">
        <ng-container *ngFor="let row of layout | omit: ['container'] | keysIn">
          <!-- Row container -->
          <div class="row">
            <ng-container *ngFor="let col of layout[row] | omit: ['container'] | keysIn">
              <ng-container *ngIf="layout[row][col] | omit: [''] as colValue">
                <!-- Col container -->
                <div [ngClass]="[colValue?.width] || 'col'">
                  <div class="form-group">
                    <label>
                      {{ controls[col].label }}
                      <strong *ngIf="controls[col].required"> * </strong>
                    </label>

                    <input
                      [ngClass]="formGroup.controls[col].invalid && formGroup.controls[col].touched ? 'border border-danger' : ''"
                      class="form-control"
                      [type]="controls[col]['inputType']"
                      [formControlName]="col"
                    />
                    <small class="text-danger" *ngIf="formGroup.controls[col]?.invalid && formGroup.controls[col]?.touched">
                      <ng-container *ngFor="let error of formGroup.controls[col]?.errors | keysIn as errors">
                        {{ configuration.validatorMessages ? configuration.validatorMessages[error] : '' }}
                      </ng-container>
                    </small>
                  </div>
                </div>
              </ng-container>
            </ng-container>
          </div>
        </ng-container>
      </form>
    </div>
  </ng-container>
</ng-container>

<!-- <div class="container">
  <p class="row">isValid : {{ formGroup.status | json }}</p>

  <div class="row" *ngFor="let key of formGroup?.controls | keysIn">
    {{ key }} :

    {{ formGroup.controls[key].value }}, {{ formGroup.controls[key].errors | json }}
  </div>
</div> -->
